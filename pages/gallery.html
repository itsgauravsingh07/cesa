<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gallery - CESA ISB</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css" rel="stylesheet">
    <link href="../assets/css/style.css" rel="stylesheet">
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-dark fixed-top">
        <div class="container">
            <a class="navbar-brand d-flex align-items-center" href="../index.html">
                <div class="brand-container">
                    <img src="../assets/images/cesa-logo.png" alt="CESA Logo" class="brand-logo">
                    <div class="brand-text">
                        <span class="brand-title">CESA</span>
                        <span class="brand-subtitle">ISBM College of Engineering</span>
                    </div>
                </div>
            </a>
            <button class="navbar-toggler custom-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <div class="toggler-icon">
                    <span></span>
                    <span></span>
                    <span></span>
                </div>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="../index.html">
                            <i class="bi bi-house-door"></i>
                            <span>Home</span>
                        </a>
                    </li>
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" id="aboutDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                            <i class="bi bi-info-circle"></i>
                            <span>About Us</span>
                        </a>
                        <ul class="dropdown-menu" aria-labelledby="aboutDropdown">
                            <li><a class="dropdown-item" href="about.html">About CESA</a></li>
                            <li><a class="dropdown-item" href="partners.html">Our Partners</a></li>
                            <li><a class="dropdown-item" href="charter.html">CESA Charter</a></li>
                        </ul>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="events.html">
                            <i class="bi bi-calendar-event"></i>
                            <span>Events</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="team.html">
                            <i class="bi bi-people"></i>
                            <span>Team</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link active" href="gallery.html">
                            <i class="bi bi-images"></i>
                            <span>Gallery</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="verify.html">
                            <i class="bi bi-award"></i>
                            <span>Certificates</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="contact.html">
                            <i class="bi bi-envelope"></i>
                            <span>Contact Us</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link login-link" href="login.html">
                            <i class="bi bi-box-arrow-in-right"></i>
                            <span>Login</span>
                        </a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Gallery Header -->
    <section class="team-header text-center">
        <div class="container">
            <div class="header-content">
                <h1 data-aos="fade-up">Our Gallery</h1>
                <div class="header-divider" data-aos="fade-up" data-aos-delay="100"></div>
                <p class="lead text-white-50" data-aos="fade-up" data-aos-delay="200">
                    Explore our events and activities through our photo gallery
                </p>
            </div>
        </div>
    </section>

    <!-- Gallery Section -->
    <section class="gallery-section py-5">
        <div class="container">
            <!-- Filter Buttons -->
            <div class="filter-buttons text-center mb-4" data-aos="fade-up">
                <button class="btn btn-outline-primary active mx-2 mb-2" onclick="loadGallery('all')">
                    <i class="bi bi-grid-3x3"></i> All Events
                </button>
                <button class="btn btn-outline-primary mx-2 mb-2" onclick="loadGallery('hacksprit')">
                    <i class="bi bi-code-slash"></i> HackSprit
                </button>
                <button class="btn btn-outline-primary mx-2 mb-2" onclick="loadGallery('project')">
                    <i class="bi bi-lightbulb"></i> Projects
                </button>
                <button class="btn btn-outline-primary mx-2 mb-2" onclick="loadGallery('painting')">
                    <i class="bi bi-palette"></i> Art Gallery
                </button>
            </div>

            <!-- Loading Spinner -->
            <div id="loading" class="text-center">
                <div class="spinner-border text-primary" role="status">
                    <span class="visually-hidden">Loading...</span>
                </div>
            </div>

            <!-- Error Display -->
            <div id="error" class="alert alert-danger d-none" role="alert"></div>

            <!-- Gallery Grid -->
            <div id="gallery-container" class="gallery-grid">
                <!-- Images will be loaded here -->
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer py-5">
        <div class="container">
            <div class="row g-4">
                <!-- Brand Column -->
                <div class="col-lg-4 col-md-6">
                    <div class="footer-brand">
                        <img src="../assets/images/cesa-logo.png" alt="CESA Logo" class="footer-logo mb-3">
                        <h5 class="text-white mb-3">CESA - ISBM College of Engineering</h5>
                        <p class="text-muted mb-0">Computer Engineering Students Association</p>
                    </div>
                </div>

                <!-- Quick Links Column -->
                <div class="col-lg-2 col-md-6">
                    <h5 class="text-white mb-4">Quick Links</h5>
                    <ul class="list-unstyled footer-links">
                        <li><a href="../index.html">Home</a></li>
                        <li><a href="about.html">About Us</a></li>
                        <li><a href="events.html">Events</a></li>
                        <li><a href="team.html">Team</a></li>
                        <li><a href="gallery.html">Gallery</a></li>
                        <li><a href="verify.html">Certificates</a></li>
                    </ul>
                </div>

                <!-- Resources Column -->
                <div class="col-lg-2 col-md-6">
                    <h5 class="text-white mb-4">Resources</h5>
                    <ul class="list-unstyled footer-links">
                        <li><a href="partners.html">Our Partners</a></li>
                        <li><a href="charter.html">CESA Charter</a></li>
                        <li><a href="#">Student Portal</a></li>
                        <li><a href="#">Downloads</a></li>
                        <li><a href="#">FAQs</a></li>
                    </ul>
                </div>

                <!-- Contact Info Column -->
                <div class="col-lg-4 col-md-6">
                    <h5 class="text-white mb-4">Contact Us</h5>
                    <div class="contact-info">
                        <p class="text-muted mb-3">
                            <i class="bi bi-geo-alt me-2"></i>
                            ISBM College of Engineering, Nande, Pune, Maharashtra 412115
                        </p>
                        <p class="text-muted mb-3">
                            <i class="bi bi-envelope me-2"></i>
                            cesa@isbmcoe.org
                        </p>
                        <p class="text-muted mb-4">
                            <i class="bi bi-phone me-2"></i>
                            +91 1234567890
                        </p>
                        <div class="social-links">
                            <a href="#" class="me-3"><i class="bi bi-facebook"></i></a>
                            <a href="#" class="me-3"><i class="bi bi-instagram"></i></a>
                            <a href="#" class="me-3"><i class="bi bi-linkedin"></i></a>
                            <a href="#" class="me-3"><i class="bi bi-github"></i></a>
                            <a href="#"><i class="bi bi-youtube"></i></a>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Footer Bottom -->
            <hr class="mt-4 mb-3 border-secondary">
            <div class="row align-items-center">
                <div class="col-md-6 text-center text-md-start">
                    <p class="text-muted mb-md-0">&copy; 2025 CESA. All rights reserved.</p>
                </div>
                <div class="col-md-6 text-center text-md-end">
                    <p class="text-muted mb-0">Designed with <i class="bi bi-heart-fill text-danger"></i> by CESA Tech Team</p>
                </div>
            </div>
        </div>
    </footer>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <script type="module">
        import config from '../config.js';

        // Initialize AOS
        AOS.init({
            duration: 800,
            once: true
        });

        const galleryContainer = document.getElementById('gallery-container');
        const loadingElement = document.getElementById('loading');
        const errorElement = document.getElementById('error');

        function showLoading() {
            loadingElement.style.display = 'block';
            galleryContainer.style.opacity = '0.5';
            errorElement.classList.add('d-none');
        }

        function hideLoading() {
            loadingElement.style.display = 'none';
            galleryContainer.style.opacity = '1';
        }

        function showError(message) {
            errorElement.textContent = message;
            errorElement.classList.remove('d-none');
            hideLoading();
        }

        async function fetchImages(folderId) {
            try {
                const url = `${config.appScriptUrl}?folder=${folderId}`;
                const response = await fetch(url);
                if (!response.ok) {
                    throw new Error('Failed to fetch images');
                }
                const data = await response.json();
                return data.data;
            } catch (error) {
                console.error('Error fetching images:', error);
                return [];
            }
        }

        async function loadGallery(type) {
            showLoading();
            try {
                const folderIds = config.eventFolders[type];
                const promises = folderIds.map(fetchImages);
                const results = await Promise.all(promises);
                const images = results.flat();
                renderGallery(images);
            } catch (error) {
                showError('Failed to load gallery images. Please try again later.');
            } finally {
                hideLoading();
            }
        }

        function renderGallery(images) {
            if (images.length === 0) {
                galleryContainer.innerHTML = '<p class="text-center text-white-50">No images found.</p>';
                return;
            }

            galleryContainer.innerHTML = images.map(image => `
                <div class="gallery-item" data-aos="fade-up">
                    <div class="gallery-image-container">
                        <img src="${image.url}" 
                             alt="${image.name}"
                             loading="lazy"
                             onerror="this.src='../assets/images/cesa-logo.png'"
                             onclick="openLightbox('${image.url}', '${image.name}')" />
                        <div class="gallery-caption">
                            <h5>${image.name}</h5>
                        </div>
                    </div>
                </div>
            `).join('');

            // Refresh AOS
            AOS.refresh();
        }

        // Make loadGallery accessible globally
        window.loadGallery = loadGallery;

        // Lightbox functionality
        window.openLightbox = function(imageUrl, title) {
            const modal = document.createElement('div');
            modal.className = 'lightbox';
            modal.innerHTML = `
                <div class="lightbox-content">
                    <span class="close-lightbox">&times;</span>
                    <img src="${imageUrl}" alt="${title}" />
                    <div class="lightbox-caption">${title}</div>
                </div>
            `;
            
            document.body.appendChild(modal);
            
            modal.onclick = (e) => {
                if (e.target.className === 'lightbox' || e.target.className === 'close-lightbox') {
                    document.body.removeChild(modal);
                }
            };
        }

        // Load all images by default
        loadGallery('all');
    </script>
</body>
</html> 